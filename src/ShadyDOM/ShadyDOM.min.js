(function(){
/*

Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
'use strict';var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Object.setPrototypeOf",function(a){return a?a:"object"!=typeof"".__proto__?null:function(a,c){a.__proto__=c;if(a.__proto__!==c)throw new TypeError(a+" is not extensible");return a}},"es6","es5");var module$$src$ShadyDOM$array_splice={};
function newSplice$$module$$src$ShadyDOM$array_splice(a,b,c){return{index:a,removed:b,addedCount:c}}
var EDIT_LEAVE$$module$$src$ShadyDOM$array_splice=0,EDIT_UPDATE$$module$$src$ShadyDOM$array_splice=1,EDIT_ADD$$module$$src$ShadyDOM$array_splice=2,EDIT_DELETE$$module$$src$ShadyDOM$array_splice=3,ArraySplice$$module$$src$ShadyDOM$array_splice={calcEditDistances:function(a,b,c,d,e,f){f=f-e+1;c=c-b+1;for(var g=Array(f),h=0;h<f;h++)g[h]=Array(c),g[h][0]=h;for(h=0;h<c;h++)g[0][h]=h;for(h=1;h<f;h++)for(var k=1;k<c;k++)if(this.equals(a[b+k-1],d[e+h-1]))g[h][k]=g[h-1][k-1];else{var l=g[h-1][k]+1,m=g[h][k-
1]+1;g[h][k]=l<m?l:m}return g},spliceOperationsFromEditDistances:function(a){for(var b=a.length-1,c=a[0].length-1,d=a[b][c],e=[];0<b||0<c;)if(0==b)e.push(EDIT_ADD$$module$$src$ShadyDOM$array_splice),c--;else if(0==c)e.push(EDIT_DELETE$$module$$src$ShadyDOM$array_splice),b--;else{var f=a[b-1][c-1],g=a[b-1][c],h=a[b][c-1],k;k=g<h?g<f?g:f:h<f?h:f;k==f?(f==d?e.push(EDIT_LEAVE$$module$$src$ShadyDOM$array_splice):(e.push(EDIT_UPDATE$$module$$src$ShadyDOM$array_splice),d=f),b--,c--):k==g?(e.push(EDIT_DELETE$$module$$src$ShadyDOM$array_splice),
b--,d=g):(e.push(EDIT_ADD$$module$$src$ShadyDOM$array_splice),c--,d=h)}e.reverse();return e},calcSplices:function(a,b,c,d,e,f){var g=0,h=0,k=Math.min(c-b,f-e);0==b&&0==e&&(g=this.sharedPrefix(a,d,k));c==a.length&&f==d.length&&(h=this.sharedSuffix(a,d,k-g));b+=g;e+=g;c-=h;f-=h;if(0==c-b&&0==f-e)return[];if(b==c){for(a=newSplice$$module$$src$ShadyDOM$array_splice(b,[],0);e<f;)a.removed.push(d[e++]);return[a]}if(e==f)return[newSplice$$module$$src$ShadyDOM$array_splice(b,[],c-b)];f=this.spliceOperationsFromEditDistances(this.calcEditDistances(a,
b,c,d,e,f));a=void 0;c=[];for(g=0;g<f.length;g++)switch(f[g]){case EDIT_LEAVE$$module$$src$ShadyDOM$array_splice:a&&(c.push(a),a=void 0);b++;e++;break;case EDIT_UPDATE$$module$$src$ShadyDOM$array_splice:a||(a=newSplice$$module$$src$ShadyDOM$array_splice(b,[],0));a.addedCount++;b++;a.removed.push(d[e]);e++;break;case EDIT_ADD$$module$$src$ShadyDOM$array_splice:a||(a=newSplice$$module$$src$ShadyDOM$array_splice(b,[],0));a.addedCount++;b++;break;case EDIT_DELETE$$module$$src$ShadyDOM$array_splice:a||
(a=newSplice$$module$$src$ShadyDOM$array_splice(b,[],0)),a.removed.push(d[e]),e++}a&&c.push(a);return c},sharedPrefix:function(a,b,c){for(var d=0;d<c;d++)if(!this.equals(a[d],b[d]))return d;return c},sharedSuffix:function(a,b,c){for(var d=a.length,e=b.length,f=0;f<c&&this.equals(a[--d],b[--e]);)f++;return f},calculateSplices:function(a,b){return this.calcSplices(a,0,a.length,b,0,b.length)},equals:function(a,b){return a===b}},calculateSplices$$module$$src$ShadyDOM$array_splice=function(a,b){return ArraySplice$$module$$src$ShadyDOM$array_splice.calculateSplices(a,
b)};module$$src$ShadyDOM$array_splice.calculateSplices=calculateSplices$$module$$src$ShadyDOM$array_splice;var module$$src$ShadyDOM$utils={},settings$$module$$src$ShadyDOM$utils={},requestedShadyDOM$$module$$src$ShadyDOM$utils=window.WebComponents&&window.WebComponents.flags.shadydom;settings$$module$$src$ShadyDOM$utils.inUse=requestedShadyDOM$$module$$src$ShadyDOM$utils||!Element.prototype.attachShadow;function isShadyRoot$$module$$src$ShadyDOM$utils(a){return"ShadyRoot"===a.__localName}
var p$$module$$src$ShadyDOM$utils=Element.prototype,matches$$module$$src$ShadyDOM$utils=p$$module$$src$ShadyDOM$utils.matches||p$$module$$src$ShadyDOM$utils.matchesSelector||p$$module$$src$ShadyDOM$utils.mozMatchesSelector||p$$module$$src$ShadyDOM$utils.msMatchesSelector||p$$module$$src$ShadyDOM$utils.oMatchesSelector||p$$module$$src$ShadyDOM$utils.webkitMatchesSelector;function matchesSelector$$module$$src$ShadyDOM$utils(a,b){return matches$$module$$src$ShadyDOM$utils.call(a,b)}
function copyOwnProperty$$module$$src$ShadyDOM$utils(a,b,c){(b=Object.getOwnPropertyDescriptor(b,a))&&Object.defineProperty(c,a,b)}function extend$$module$$src$ShadyDOM$utils(a,b){if(a&&b)for(var c=Object.getOwnPropertyNames(b),d=0,e;d<c.length&&(e=c[d]);d++)copyOwnProperty$$module$$src$ShadyDOM$utils(e,b,a);return a||b}
function extendAll$$module$$src$ShadyDOM$utils(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];for(d=0;d<c.length;d++)extend$$module$$src$ShadyDOM$utils(a,c[d]);return a}function patchPrototype$$module$$src$ShadyDOM$utils(a,b){var c=Object.getPrototypeOf(a);if(!c.hasOwnProperty("__patchProto")){var d=Object.create(c);d.__sourceProto=c;extend$$module$$src$ShadyDOM$utils(d,b);c.__patchProto=d}Object.setPrototypeOf(a,c.__patchProto)}
function unpatchPrototype$$module$$src$ShadyDOM$utils(a){a.__sourceProto&&Object.setPrototypeOf(a,a.__sourceProto)}var common$$module$$src$ShadyDOM$utils={};module$$src$ShadyDOM$utils.settings=settings$$module$$src$ShadyDOM$utils;module$$src$ShadyDOM$utils.isShadyRoot=isShadyRoot$$module$$src$ShadyDOM$utils;module$$src$ShadyDOM$utils.matchesSelector=matchesSelector$$module$$src$ShadyDOM$utils;module$$src$ShadyDOM$utils.extend=extend$$module$$src$ShadyDOM$utils;
module$$src$ShadyDOM$utils.extendAll=extendAll$$module$$src$ShadyDOM$utils;module$$src$ShadyDOM$utils.patchPrototype=patchPrototype$$module$$src$ShadyDOM$utils;module$$src$ShadyDOM$utils.unpatchPrototype=unpatchPrototype$$module$$src$ShadyDOM$utils;module$$src$ShadyDOM$utils.common=common$$module$$src$ShadyDOM$utils;var module$$src$ShadyDOM$tree={},nativeInsertBefore$$module$$src$ShadyDOM$tree=Element.prototype.insertBefore,nativeAppendChild$$module$$src$ShadyDOM$tree=Element.prototype.appendChild,nativeRemoveChild$$module$$src$ShadyDOM$tree=Element.prototype.removeChild,tree$$module$$src$ShadyDOM$tree={arrayCopyChildNodes:function(a){var b=[],c=0;for(a=a.firstChild;a;a=a.nextSibling)b[c++]=a;return b},arrayCopyChildren:function(a){var b=[],c=0;for(a=a.firstElementChild;a;a=a.nextElementSibling)b[c++]=a;return b},
arrayCopy:function(a){for(var b=a.length,c=Array(b),d=0;d<b;d++)c[d]=a[d];return c},saveChildNodes:function(a){tree$$module$$src$ShadyDOM$tree.Logical.saveChildNodes(a);tree$$module$$src$ShadyDOM$tree.Composed.hasParentNode(a)||tree$$module$$src$ShadyDOM$tree.Composed.saveComposedData(a);tree$$module$$src$ShadyDOM$tree.Composed.saveChildNodes(a)},Logical:{hasParentNode:function(a){return!(!a.__dom||!a.__dom.parentNode)},hasChildNodes:function(a){return!(!a.__dom||void 0===a.__dom.childNodes)},getChildNodes:function(a){return this.hasChildNodes(a)?
this._getChildNodes(a):tree$$module$$src$ShadyDOM$tree.Composed.getChildNodes(a)},_getChildNodes:function(a){if(!a.__dom.childNodes){a.__dom.childNodes=[];for(var b=this.getFirstChild(a);b;b=this.getNextSibling(b))a.__dom.childNodes.push(b)}return a.__dom.childNodes},getParentNode:function(a){return a.__dom&&void 0!==a.__dom.parentNode?a.__dom.parentNode:tree$$module$$src$ShadyDOM$tree.Composed.getParentNode(a)},getFirstChild:function(a){return a.__dom&&void 0!==a.__dom.firstChild?a.__dom.firstChild:
tree$$module$$src$ShadyDOM$tree.Composed.getFirstChild(a)},getLastChild:function(a){return a.__dom&&void 0!==a.__dom.lastChild?a.__dom.lastChild:tree$$module$$src$ShadyDOM$tree.Composed.getLastChild(a)},getNextSibling:function(a){return a.__dom&&void 0!==a.__dom.nextSibling?a.__dom.nextSibling:tree$$module$$src$ShadyDOM$tree.Composed.getNextSibling(a)},getPreviousSibling:function(a){return a.__dom&&void 0!==a.__dom.previousSibling?a.__dom.previousSibling:tree$$module$$src$ShadyDOM$tree.Composed.getPreviousSibling(a)},
getFirstElementChild:function(a){return a.__dom&&void 0!==a.__dom.firstChild?this._getFirstElementChild(a):tree$$module$$src$ShadyDOM$tree.Composed.getFirstElementChild(a)},_getFirstElementChild:function(a){for(a=a.__dom.firstChild;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.__dom.nextSibling;return a},getLastElementChild:function(a){return a.__dom&&void 0!==a.__dom.lastChild?this._getLastElementChild(a):tree$$module$$src$ShadyDOM$tree.Composed.getLastElementChild(a)},_getLastElementChild:function(a){for(a=
a.__dom.lastChild;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.__dom.previousSibling;return a},getNextElementSibling:function(a){return a.__dom&&void 0!==a.__dom.nextSibling?this._getNextElementSibling(a):tree$$module$$src$ShadyDOM$tree.Composed.getNextElementSibling(a)},_getNextElementSibling:function(a){for(a=a.__dom.nextSibling;a&&a.nodeType!==Node.ELEMENT_NODE;)a=this.getNextSibling(a);return a},getPreviousElementSibling:function(a){return a.__dom&&void 0!==a.__dom.previousSibling?this._getPreviousElementSibling(a):
tree$$module$$src$ShadyDOM$tree.Composed.getPreviousElementSibling(a)},_getPreviousElementSibling:function(a){for(a=a.__dom.previousSibling;a&&a.nodeType!==Node.ELEMENT_NODE;)a=this.getPreviousSibling(a);return a},saveChildNodes:function(a){if(!this.hasChildNodes(a)){a.__dom=a.__dom||{};a.__dom.firstChild=a.firstChild;a.__dom.lastChild=a.lastChild;for(var b=a.__dom.childNodes=tree$$module$$src$ShadyDOM$tree.arrayCopyChildNodes(a),c=0,d;c<b.length&&(d=b[c]);c++)d.__dom=d.__dom||{},d.__dom.parentNode=
a,d.__dom.nextSibling=b[c+1]||null,d.__dom.previousSibling=b[c-1]||null,module$$src$ShadyDOM$utils.common.patchNode(d)}},recordInsertBefore:function(a,b,c){b.__dom.childNodes=null;if(a.nodeType===Node.DOCUMENT_FRAGMENT_NODE){for(var d=tree$$module$$src$ShadyDOM$tree.arrayCopyChildNodes(a),e=0;e<d.length;e++)this._linkNode(d[e],b,c);a.__dom=a.__dom||{};a.__dom.firstChild=a.__dom.lastChild=void 0;a.__dom.childNodes=null}else this._linkNode(a,b,c)},_linkNode:function(a,b,c){module$$src$ShadyDOM$utils.common.patchNode(a);
c=c||null;a.__dom=a.__dom||{};b.__dom=b.__dom||{};c&&(c.__dom=c.__dom||{});a.__dom.previousSibling=c?c.__dom.previousSibling:b.__dom.lastChild;a.__dom.previousSibling&&(a.__dom.previousSibling.__dom.nextSibling=a);a.__dom.nextSibling=c;a.__dom.nextSibling&&(a.__dom.nextSibling.__dom.previousSibling=a);a.__dom.parentNode=b;c?c===b.__dom.firstChild&&(b.__dom.firstChild=a):(b.__dom.lastChild=a,b.__dom.firstChild||(b.__dom.firstChild=a));b.__dom.childNodes=null},recordRemoveChild:function(a,b){a.__dom=
a.__dom||{};b.__dom=b.__dom||{};a===b.__dom.firstChild&&(b.__dom.firstChild=a.__dom.nextSibling);a===b.__dom.lastChild&&(b.__dom.lastChild=a.__dom.previousSibling);var c=a.__dom.previousSibling,d=a.__dom.nextSibling;c&&(c.__dom=c.__dom||{},c.__dom.nextSibling=d);d&&(d.__dom=d.__dom||{},d.__dom.previousSibling=c);a.__dom.parentNode=a.__dom.previousSibling=a.__dom.nextSibling=void 0;b.__dom.childNodes=null}},Composed:{hasParentNode:function(a){return!(!a.__dom||void 0===a.__dom.$parentNode)},hasChildNodes:function(a){return!(!a.__dom||
void 0===a.__dom.$childNodes)},getChildNodes:function(a){return this.hasChildNodes(a)?this._getChildNodes(a):!a.__patched&&tree$$module$$src$ShadyDOM$tree.arrayCopy(a.childNodes)},_getChildNodes:function(a){if(!a.__dom.$childNodes){a.__dom.$childNodes=[];for(var b=a.__dom.$firstChild;b;b=b.__dom.$nextSibling)a.__dom.$childNodes.push(b)}return a.__dom.$childNodes},getComposedChildNodes:function(a){return a.__dom.$childNodes},getParentNode:function(a){return this.hasParentNode(a)?a.__dom.$parentNode:
!a.__patched&&a.parentNode},getFirstChild:function(a){return a.__patched?a.__dom.$firstChild:a.firstChild},getLastChild:function(a){return a.__patched?a.__dom.$lastChild:a.lastChild},getNextSibling:function(a){return a.__patched?a.__dom.$nextSibling:a.nextSibling},getPreviousSibling:function(a){return a.__patched?a.__dom.$previousSibling:a.previousSibling},getFirstElementChild:function(a){return a.__patched?this._getFirstElementChild(a):a.firstElementChild},_getFirstElementChild:function(a){for(a=
a.__dom.$firstChild;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.__dom.$nextSibling;return a},getLastElementChild:function(a){return a.__patched?this._getLastElementChild(a):a.lastElementChild},_getLastElementChild:function(a){for(a=a.__dom.$lastChild;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.__dom.$previousSibling;return a},getNextElementSibling:function(a){return a.__patched?this._getNextElementSibling(a):a.nextElementSibling},_getNextElementSibling:function(a){for(a=a.__dom.$nextSibling;a&&a.nodeType!==
Node.ELEMENT_NODE;)a=this.getNextSibling(a);return a},getPreviousElementSibling:function(a){return a.__patched?this._getPreviousElementSibling(a):a.previousElementSibling},_getPreviousElementSibling:function(a){for(a=a.__dom.$previousSibling;a&&a.nodeType!==Node.ELEMENT_NODE;)a=this.getPreviousSibling(a);return a},saveChildNodes:function(a){if(!this.hasChildNodes(a)){a.__dom=a.__dom||{};a.__dom.$firstChild=a.firstChild;a.__dom.$lastChild=a.lastChild;a=a.__dom.$childNodes=tree$$module$$src$ShadyDOM$tree.arrayCopyChildNodes(a);
for(var b=0,c;b<a.length&&(c=a[b]);b++)this.saveComposedData(c)}},saveComposedData:function(a){a.__dom=a.__dom||{};void 0===a.__dom.$parentNode&&(a.__dom.$parentNode=a.parentNode);void 0===a.__dom.$nextSibling&&(a.__dom.$nextSibling=a.nextSibling);void 0===a.__dom.$previousSibling&&(a.__dom.$previousSibling=a.previousSibling)},recordInsertBefore:function(a,b,c){b.__dom.$childNodes=null;if(a.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(a=this.getFirstChild(a);a;a=this.getNextSibling(a))this._linkNode(a,
b,c);else this._linkNode(a,b,c)},_linkNode:function(a,b,c){a.__dom=a.__dom||{};b.__dom=b.__dom||{};c&&(c.__dom=c.__dom||{});a.__dom.$previousSibling=c?c.__dom.$previousSibling:b.__dom.$lastChild;a.__dom.$previousSibling&&(a.__dom.$previousSibling.__dom.$nextSibling=a);a.__dom.$nextSibling=c;a.__dom.$nextSibling&&(a.__dom.$nextSibling.__dom.$previousSibling=a);a.__dom.$parentNode=b;c?c===b.__dom.$firstChild&&(b.__dom.$firstChild=a):(b.__dom.$lastChild=a,b.__dom.$firstChild||(b.__dom.$firstChild=a));
b.__dom.$childNodes=null},recordRemoveChild:function(a,b){a.__dom=a.__dom||{};b.__dom=b.__dom||{};a===b.__dom.$firstChild&&(b.__dom.$firstChild=a.__dom.$nextSibling);a===b.__dom.$lastChild&&(b.__dom.$lastChild=a.__dom.$previousSibling);var c=a.__dom.$previousSibling,d=a.__dom.$nextSibling;c&&(c.__dom=c.__dom||{},c.__dom.$nextSibling=d);d&&(d.__dom=d.__dom||{},d.__dom.$previousSibling=c);a.__dom.$parentNode=a.__dom.$previousSibling=a.__dom.$nextSibling=null;b.__dom.$childNodes=null},clearChildNodes:function(a){for(var b=
this.getChildNodes(a),c=0,d;c<b.length;c++)d=b[c],this.recordRemoveChild(d,a),nativeRemoveChild$$module$$src$ShadyDOM$tree.call(a,d)},saveParentNode:function(a){a.__dom=a.__dom||{};a.__dom.$parentNode=a.parentNode},insertBefore:function(a,b,c){this.saveChildNodes(a);this._addChild(a,b,c);return nativeInsertBefore$$module$$src$ShadyDOM$tree.call(a,b,c||null)},appendChild:function(a,b){this.saveChildNodes(a);this._addChild(a,b);return nativeAppendChild$$module$$src$ShadyDOM$tree.call(a,b)},removeChild:function(a,
b){var c=this.getParentNode(b);this.saveChildNodes(a);this._removeChild(a,b);if(c===a)return nativeRemoveChild$$module$$src$ShadyDOM$tree.call(a,b)},_addChild:function(a,b,c){var d=b.nodeType===Node.DOCUMENT_FRAGMENT_NODE,e=this.getParentNode(b);e&&this._removeChild(e,b);if(d)for(d=this.getChildNodes(b),e=0;e<d.length;e++){var f=d[e];this._removeChild(b,f);this.recordInsertBefore(f,a,c)}else this.recordInsertBefore(b,a,c)},_removeChild:function(a,b){this.recordRemoveChild(b,a)}}},descriptors$$module$$src$ShadyDOM$tree=
{};function getNativeProperty$$module$$src$ShadyDOM$tree(a,b){descriptors$$module$$src$ShadyDOM$tree[b]||(descriptors$$module$$src$ShadyDOM$tree[b]=Object.getOwnPropertyDescriptor(HTMLElement.prototype,b)||Object.getOwnPropertyDescriptor(Element.prototype,b)||Object.getOwnPropertyDescriptor(Node.prototype,b));return descriptors$$module$$src$ShadyDOM$tree[b].get.call(a)}
function assertNative$$module$$src$ShadyDOM$tree(a,b,c){b=getNativeProperty$$module$$src$ShadyDOM$tree(a,b);b!=c&&a.__patched&&window.console.warn("tracked",c,"native",b);return c}module$$src$ShadyDOM$tree.tree=tree$$module$$src$ShadyDOM$tree;module$$src$ShadyDOM$tree.getNativeProperty=getNativeProperty$$module$$src$ShadyDOM$tree;var module$$src$ShadyDOM$distributor={},$jscompDefaultExport$$module$$src$ShadyDOM$distributor=function(a){this.root=a;this.insertionPointTag="slot"};$jscompDefaultExport$$module$$src$ShadyDOM$distributor.prototype.getInsertionPoints=function(){return this.root.querySelectorAll(this.insertionPointTag)};$jscompDefaultExport$$module$$src$ShadyDOM$distributor.prototype.hasInsertionPoint=function(){return!(!this.root._insertionPoints||!this.root._insertionPoints.length)};
$jscompDefaultExport$$module$$src$ShadyDOM$distributor.prototype.isInsertionPoint=function(a){return a.localName&&a.localName==this.insertionPointTag};$jscompDefaultExport$$module$$src$ShadyDOM$distributor.prototype.reset=function(){for(var a=module$$src$ShadyDOM$tree.tree.Logical.getChildNodes(this.root.host),b=0;b<a.length;b++)this.resetChild(a[b]);a=this.root._insertionPoints;for(b=0;b<a.length;b++)this.resetInsertionPoint(a[b])};
$jscompDefaultExport$$module$$src$ShadyDOM$distributor.prototype.resetChild=function(a){a._assignedSlot=void 0};$jscompDefaultExport$$module$$src$ShadyDOM$distributor.prototype.resetInsertionPoint=function(a){a._distributedNodes=[];a._assignedNodes=[]};$jscompDefaultExport$$module$$src$ShadyDOM$distributor.prototype.distribute=function(){return this.hasInsertionPoint()?(this.reset(),this.distributePool(this.root,this.collectPool())):[]};
$jscompDefaultExport$$module$$src$ShadyDOM$distributor.prototype.collectPool=function(){return module$$src$ShadyDOM$tree.tree.arrayCopy(module$$src$ShadyDOM$tree.tree.Logical.getChildNodes(this.root.host))};
$jscompDefaultExport$$module$$src$ShadyDOM$distributor.prototype.distributePool=function(a,b){a=[];for(var c=this.root._insertionPoints,d=0,e=c.length,f;d<e&&(f=c[d]);d++){this.distributeInsertionPoint(f,b);var g=module$$src$ShadyDOM$tree.tree.Logical.getParentNode(f);g&&g.shadyRoot&&this.hasInsertionPoint(g.shadyRoot)&&a.push(g.shadyRoot)}return a};
$jscompDefaultExport$$module$$src$ShadyDOM$distributor.prototype.distributeInsertionPoint=function(a,b){for(var c=!1,d=0,e=b.length,f;d<e;d++)(f=b[d])&&this.matchesInsertionPoint(f,a)&&(this.distributeNodeInto(f,a),b[d]=void 0,c=!0);if(!c)for(b=module$$src$ShadyDOM$tree.tree.Logical.getChildNodes(a),c=0;c<b.length;c++)this.distributeNodeInto(b[c],a);this.setDistributedNodesOnInsertionPoint(a)};
$jscompDefaultExport$$module$$src$ShadyDOM$distributor.prototype.matchesInsertionPoint=function(a,b){b=(b=b.getAttribute("name"))?b.trim():"";a=(a=a.getAttribute&&a.getAttribute("slot"))?a.trim():"";return a==b};$jscompDefaultExport$$module$$src$ShadyDOM$distributor.prototype.distributeNodeInto=function(a,b){b._assignedNodes.push(a);a._assignedSlot=b};
$jscompDefaultExport$$module$$src$ShadyDOM$distributor.prototype.setDistributedNodesOnInsertionPoint=function(a){var b=a._assignedNodes;a._distributedNodes=[];for(var c=0,d;c<b.length&&(d=b[c]);c++)if(this.isInsertionPoint(d)){var e=d._distributedNodes;if(e)for(var f=0;f<e.length;f++)a._distributedNodes.push(e[f])}else a._distributedNodes.push(b[c])};$jscompDefaultExport$$module$$src$ShadyDOM$distributor.prototype.isFinalDestination=function(a){return!a._assignedSlot};
$jscompDefaultExport$$module$$src$ShadyDOM$distributor.prototype.rendered=function(){for(var a=this.root._insertionPoints,b=0,c;b<a.length;b++)c=a[b],c.__eventListenerCount&&c.dispatchEvent(new Event("slotchange",{cancelable:!0}))};module$$src$ShadyDOM$distributor.default=$jscompDefaultExport$$module$$src$ShadyDOM$distributor;var module$$src$ShadyDOM$innerHTML={},escapeAttrRegExp$$module$$src$ShadyDOM$innerHTML=/[&\u00A0"]/g,escapeDataRegExp$$module$$src$ShadyDOM$innerHTML=/[&\u00A0<>]/g;function escapeReplace$$module$$src$ShadyDOM$innerHTML(a){switch(a){case "&":return"&amp;";case "<":return"&lt;";case ">":return"&gt;";case '"':return"&quot;";case "\u00a0":return"&nbsp;"}}
function escapeAttr$$module$$src$ShadyDOM$innerHTML(a){return a.replace(escapeAttrRegExp$$module$$src$ShadyDOM$innerHTML,escapeReplace$$module$$src$ShadyDOM$innerHTML)}function escapeData$$module$$src$ShadyDOM$innerHTML(a){return a.replace(escapeDataRegExp$$module$$src$ShadyDOM$innerHTML,escapeReplace$$module$$src$ShadyDOM$innerHTML)}function makeSet$$module$$src$ShadyDOM$innerHTML(a){for(var b={},c=0;c<a.length;c++)b[a[c]]=!0;return b}
var voidElements$$module$$src$ShadyDOM$innerHTML=makeSet$$module$$src$ShadyDOM$innerHTML("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),plaintextParents$$module$$src$ShadyDOM$innerHTML=makeSet$$module$$src$ShadyDOM$innerHTML("style script xmp iframe noembed noframes plaintext noscript".split(" "));
function getOuterHTML$$module$$src$ShadyDOM$innerHTML(a,b,c){switch(a.nodeType){case Node.ELEMENT_NODE:b=a.localName;for(var d="<"+b,e=a.attributes,f=0,g;g=e[f];f++)d+=" "+g.name+'="'+escapeAttr$$module$$src$ShadyDOM$innerHTML(g.value)+'"';d+=">";return voidElements$$module$$src$ShadyDOM$innerHTML[b]?d:d+getInnerHTML$$module$$src$ShadyDOM$innerHTML(a,c)+"</"+b+">";case Node.TEXT_NODE:return a=a.data,b&&plaintextParents$$module$$src$ShadyDOM$innerHTML[b.localName]?a:escapeData$$module$$src$ShadyDOM$innerHTML(a);
case Node.COMMENT_NODE:return"\x3c!--"+a.data+"--\x3e";default:throw window.console.error(a),Error("not implemented");}}function getInnerHTML$$module$$src$ShadyDOM$innerHTML(a,b){"template"===a.localName&&(a=a.content);for(var c="",d=b?b(a):a.childNodes,e=0,f=d.length,g;e<f&&(g=d[e]);e++)c+=getOuterHTML$$module$$src$ShadyDOM$innerHTML(g,a,b);return c}module$$src$ShadyDOM$innerHTML.getOuterHTML=getOuterHTML$$module$$src$ShadyDOM$innerHTML;module$$src$ShadyDOM$innerHTML.getInnerHTML=getInnerHTML$$module$$src$ShadyDOM$innerHTML;var module$$src$ShadyDOM$element_mixin={},mixinImpl$$module$$src$ShadyDOM$element_mixin={addNode:function(a,b,c){var d=this.ownerShadyRootForNode(a);d&&(b.__noInsertionPoint&&(d._skipUpdateInsertionPoints=!0),this._maybeAddInsertionPoint(b,a,d)&&(d._skipUpdateInsertionPoints=!1),this._addedNode(b,d));module$$src$ShadyDOM$tree.tree.Logical.hasChildNodes(a)&&module$$src$ShadyDOM$tree.tree.Logical.recordInsertBefore(b,a,c);if(a=this._maybeDistribute(b,a,d)||a.shadyRoot)if(b.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(c=
module$$src$ShadyDOM$tree.tree.arrayCopyChildNodes(b),d=0;d<c.length;d++)module$$src$ShadyDOM$tree.tree.Composed.removeChild(b,c[d]);else(c=module$$src$ShadyDOM$tree.tree.Composed.getParentNode(b))&&module$$src$ShadyDOM$tree.tree.Composed.removeChild(c,b);return a},removeNode:function(a){var b=module$$src$ShadyDOM$tree.tree.Logical.hasParentNode(a)&&module$$src$ShadyDOM$tree.tree.Logical.getParentNode(a),c,d=this.ownerShadyRootForNode(a);b&&(c=this.maybeDistributeParent(a),module$$src$ShadyDOM$tree.tree.Logical.recordRemoveChild(a,
b),d&&(this._removeDistributedChildren(d,a)||b.localName===d.getInsertionPointTag())&&(d._skipUpdateInsertionPoints=!1,d.update()));this._removeOwnerShadyRoot(a);d&&this._removedNode(a,d);return c},removeNodeFromParent:function(a,b){b?this.removeNode(a):this._removeOwnerShadyRoot(a)},_hasCachedOwnerRoot:function(a){return void 0!==a.__ownerShadyRoot},getRootNode:function(a){if(a&&a.nodeType){var b=a.__ownerShadyRoot;void 0===b&&(b=module$$src$ShadyDOM$utils.isShadyRoot(a)?a:(b=module$$src$ShadyDOM$tree.tree.Logical.getParentNode(a))?
this.getRootNode(b):a,document.contains(a)&&(a.__ownerShadyRoot=b));return b}},ownerShadyRootForNode:function(a){a=this.getRootNode(a);if(module$$src$ShadyDOM$utils.isShadyRoot(a))return a},_maybeDistribute:function(a,b,c){var d=c&&c.getInsertionPointTag()||"",e=a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&!a.__noInsertionPoint&&d&&a.querySelector(d),f=e&&module$$src$ShadyDOM$tree.tree.Logical.getParentNode(e).nodeType!==Node.DOCUMENT_FRAGMENT_NODE;((a=e||a.localName===d)||b.localName===d)&&c&&c.update();
(c=this._nodeNeedsDistribution(b))&&b.shadyRoot.update();return c||a&&!f},_maybeAddInsertionPoint:function(a,b,c){var d,e=c.getInsertionPointTag();if(a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||a.__noInsertionPoint)a.localName===e&&(module$$src$ShadyDOM$tree.tree.Logical.saveChildNodes(b),module$$src$ShadyDOM$tree.tree.Logical.saveChildNodes(a),d=!0);else for(var e=a.querySelectorAll(e),f=0,g,h;f<e.length&&(g=e[f]);f++)h=module$$src$ShadyDOM$tree.tree.Logical.getParentNode(g),h===a&&(h=b),h=this._maybeAddInsertionPoint(g,
h,c),d=d||h;return d},_nodeNeedsDistribution:function(a){return a&&a.shadyRoot&&a.shadyRoot.hasInsertionPoint()},_addedNode:function(){},_removedNode:function(){},_removeDistributedChildren:function(a,b){var c;a=a._insertionPoints;for(var d=0;d<a.length;d++){var e=a[d];if(this._contains(b,e))for(var e=e.assignedNodes({flatten:!0}),f=0;f<e.length;f++){c=!0;var g=e[f],h=module$$src$ShadyDOM$tree.tree.Composed.getParentNode(g);h&&module$$src$ShadyDOM$tree.tree.Composed.removeChild(h,g)}}return c},_contains:function(a,
b){for(;b;){if(b==a)return!0;b=module$$src$ShadyDOM$tree.tree.Logical.getParentNode(b)}},_removeOwnerShadyRoot:function(a){if(this._hasCachedOwnerRoot(a))for(var b=module$$src$ShadyDOM$tree.tree.Logical.getChildNodes(a),c=0,d=b.length,e;c<d&&(e=b[c]);c++)this._removeOwnerShadyRoot(e);a.__ownerShadyRoot=void 0},firstComposedNode:function(a){for(var b=a.assignedNodes({flatten:!0}),c=this.getRootNode(a),d=0,e=b.length,f;d<e&&(f=b[d]);d++)if(c.isFinalDestination(a,f))return f},clearNode:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},
maybeDistributeParent:function(a){a=module$$src$ShadyDOM$tree.tree.Logical.getParentNode(a);if(this._nodeNeedsDistribution(a))return a.shadyRoot.update(),!0},maybeDistributeAttributeChange:function(a,b){"slot"===a.localName&&"name"===b&&(a=this.getRootNode(a),a.update&&a.update())},query:function(a,b,c){var d=[];this._queryElements(module$$src$ShadyDOM$tree.tree.Logical.getChildNodes(a),b,c,d);return d},_queryElements:function(a,b,c,d){for(var e=0,f=a.length,g;e<f&&(g=a[e]);e++)if(g.nodeType===Node.ELEMENT_NODE&&
this._queryElement(g,b,c,d))return!0},_queryElement:function(a,b,c,d){var e=b(a);e&&d.push(a);if(c&&c(e))return e;this._queryElements(module$$src$ShadyDOM$tree.tree.Logical.getChildNodes(a),b,c,d)},activeElementForNode:function(a){var b=document.activeElement;if(!b)return null;var c=!!module$$src$ShadyDOM$utils.isShadyRoot(a);if(!(a===document||c&&a.host!==b&&a.host.contains(b)))return null;for(c=this.ownerShadyRootForNode(b);c&&c!==a;)b=c.host,c=this.ownerShadyRootForNode(b);return a===document?
c?null:b:c===a?b:null}},nativeCloneNode$$module$$src$ShadyDOM$element_mixin=Element.prototype.cloneNode,nativeImportNode$$module$$src$ShadyDOM$element_mixin=Document.prototype.importNode,nativeSetAttribute$$module$$src$ShadyDOM$element_mixin=Element.prototype.setAttribute,nativeRemoveAttribute$$module$$src$ShadyDOM$element_mixin=Element.prototype.removeAttribute,NodeMixin$$module$$src$ShadyDOM$element_mixin={};
Object.defineProperties(NodeMixin$$module$$src$ShadyDOM$element_mixin,{parentElement:{get:function(){return module$$src$ShadyDOM$tree.tree.Logical.getParentNode(this)},configurable:!0},parentNode:{get:function(){return module$$src$ShadyDOM$tree.tree.Logical.getParentNode(this)},configurable:!0},nextSibling:{get:function(){return module$$src$ShadyDOM$tree.tree.Logical.getNextSibling(this)},configurable:!0},previousSibling:{get:function(){return module$$src$ShadyDOM$tree.tree.Logical.getPreviousSibling(this)},
configurable:!0},nextElementSibling:{get:function(){return module$$src$ShadyDOM$tree.tree.Logical.getNextElementSibling(this)},configurable:!0},previousElementSibling:{get:function(){return module$$src$ShadyDOM$tree.tree.Logical.getPreviousElementSibling(this)},configurable:!0},assignedSlot:{get:function(){return this._assignedSlot},configurable:!0}});
var FragmentMixin$$module$$src$ShadyDOM$element_mixin={appendChild:function(a){return this.insertBefore(a)},insertBefore:function(a,b){if(b&&module$$src$ShadyDOM$tree.tree.Logical.getParentNode(b)!==this)throw Error("The ref_node to be inserted before is not a child of this node");if(a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var c=module$$src$ShadyDOM$tree.tree.Logical.getParentNode(a);mixinImpl$$module$$src$ShadyDOM$element_mixin.removeNodeFromParent(a,c)}mixinImpl$$module$$src$ShadyDOM$element_mixin.addNode(this,
a,b)||(b&&(c=mixinImpl$$module$$src$ShadyDOM$element_mixin.ownerShadyRootForNode(b))&&(b=b.localName===c.getInsertionPointTag()?mixinImpl$$module$$src$ShadyDOM$element_mixin.firstComposedNode(b):b),c=module$$src$ShadyDOM$utils.isShadyRoot(this)?this.host:this,b?module$$src$ShadyDOM$tree.tree.Composed.insertBefore(c,a,b):module$$src$ShadyDOM$tree.tree.Composed.appendChild(c,a));return a},removeChild:function(a){if(module$$src$ShadyDOM$tree.tree.Logical.getParentNode(a)!==this)throw Error("The node to be removed is not a child of this node: "+
a);if(!mixinImpl$$module$$src$ShadyDOM$element_mixin.removeNode(a)){var b=module$$src$ShadyDOM$utils.isShadyRoot(this)?this.host:this,c=module$$src$ShadyDOM$tree.tree.Composed.getParentNode(a);b===c&&module$$src$ShadyDOM$tree.tree.Composed.removeChild(b,a)}return a},replaceChild:function(a,b){this.insertBefore(a,b);this.removeChild(b);return a},querySelector:function(a){return mixinImpl$$module$$src$ShadyDOM$element_mixin.query(this,function(b){return module$$src$ShadyDOM$utils.matchesSelector(b,
a)},function(a){return!!a})[0]||null},querySelectorAll:function(a){return mixinImpl$$module$$src$ShadyDOM$element_mixin.query(this,function(b){return module$$src$ShadyDOM$utils.matchesSelector(b,a)})},cloneNode:function(a){if("template"==this.localName)return nativeCloneNode$$module$$src$ShadyDOM$element_mixin.call(this,a);var b=nativeCloneNode$$module$$src$ShadyDOM$element_mixin.call(this,!1);if(a){a=this.childNodes;for(var c=0,d;c<a.length;c++)d=a[c].cloneNode(!0),b.appendChild(d)}return b},importNode:function(a,
b){var c=this instanceof Document?this:this.ownerDocument,d=nativeImportNode$$module$$src$ShadyDOM$element_mixin.call(c,a,!1);if(b){a=module$$src$ShadyDOM$tree.tree.Logical.getChildNodes(a);module$$src$ShadyDOM$utils.common.patchNode(d);b=0;for(var e;b<a.length;b++)e=c.importNode(a[b],!0),d.appendChild(e)}return d}};
Object.defineProperties(FragmentMixin$$module$$src$ShadyDOM$element_mixin,{childNodes:{get:function(){var a=module$$src$ShadyDOM$tree.tree.Logical.getChildNodes(this);return Array.isArray(a)?a:module$$src$ShadyDOM$tree.tree.arrayCopyChildNodes(this)},configurable:!0},children:{get:function(){return module$$src$ShadyDOM$tree.tree.Logical.hasChildNodes(this)?Array.prototype.filter.call(this.childNodes,function(a){return a.nodeType===Node.ELEMENT_NODE}):module$$src$ShadyDOM$tree.tree.arrayCopyChildren(this)},
configurable:!0},firstChild:{get:function(){return module$$src$ShadyDOM$tree.tree.Logical.getFirstChild(this)},configurable:!0},lastChild:{get:function(){return module$$src$ShadyDOM$tree.tree.Logical.getLastChild(this)},configurable:!0},firstElementChild:{get:function(){return module$$src$ShadyDOM$tree.tree.Logical.getFirstElementChild(this)},configurable:!0},lastElementChild:{get:function(){return module$$src$ShadyDOM$tree.tree.Logical.getLastElementChild(this)},configurable:!0},textContent:{get:function(){if(this.childNodes){for(var a=
[],b=0,c=this.childNodes,d;d=c[b];b++)d.nodeType!==Node.COMMENT_NODE&&a.push(d.textContent);return a.join("")}return""},set:function(a){mixinImpl$$module$$src$ShadyDOM$element_mixin.clearNode(this);a&&this.appendChild(document.createTextNode(a))},configurable:!0},innerHTML:{get:function(){return module$$src$ShadyDOM$innerHTML.getInnerHTML(this)},set:function(a){mixinImpl$$module$$src$ShadyDOM$element_mixin.clearNode(this);var b=document.createElement("div");b.innerHTML=a;a=module$$src$ShadyDOM$tree.tree.arrayCopyChildNodes(b);
for(b=0;b<a.length;b++)this.appendChild(a[b])},configurable:!0}});
var ElementMixin$$module$$src$ShadyDOM$element_mixin={assignedNodes:function(a){return(a&&a.flatten?this._distributedNodes:this._assignedNodes)||[]},setAttribute:function(a,b){nativeSetAttribute$$module$$src$ShadyDOM$element_mixin.call(this,a,b);mixinImpl$$module$$src$ShadyDOM$element_mixin.maybeDistributeParent(this)||mixinImpl$$module$$src$ShadyDOM$element_mixin.maybeDistributeAttributeChange(this,a)},removeAttribute:function(a){nativeRemoveAttribute$$module$$src$ShadyDOM$element_mixin.call(this,a);
mixinImpl$$module$$src$ShadyDOM$element_mixin.maybeDistributeParent(this)||mixinImpl$$module$$src$ShadyDOM$element_mixin.maybeDistributeAttributeChange(this,a)}};Object.defineProperties(ElementMixin$$module$$src$ShadyDOM$element_mixin,{shadowRoot:{get:function(){return this.shadyRoot}},slot:{get:function(){return this.getAttribute("slot")},set:function(a){this.setAttribute("slot",a)}}});
var activeElementDescriptor$$module$$src$ShadyDOM$element_mixin={get:function(){return mixinImpl$$module$$src$ShadyDOM$element_mixin.activeElementForNode(this)}},ActiveElementMixin$$module$$src$ShadyDOM$element_mixin={};Object.defineProperties(ActiveElementMixin$$module$$src$ShadyDOM$element_mixin,{activeElement:activeElementDescriptor$$module$$src$ShadyDOM$element_mixin});var UnderActiveElementMixin$$module$$src$ShadyDOM$element_mixin={};
Object.defineProperties(UnderActiveElementMixin$$module$$src$ShadyDOM$element_mixin,{_activeElement:activeElementDescriptor$$module$$src$ShadyDOM$element_mixin});
var Mixins$$module$$src$ShadyDOM$element_mixin={Node:module$$src$ShadyDOM$utils.extendAll({__patched:"Node"},NodeMixin$$module$$src$ShadyDOM$element_mixin),Fragment:module$$src$ShadyDOM$utils.extendAll({__patched:"Fragment"},NodeMixin$$module$$src$ShadyDOM$element_mixin,FragmentMixin$$module$$src$ShadyDOM$element_mixin,ActiveElementMixin$$module$$src$ShadyDOM$element_mixin),Element:module$$src$ShadyDOM$utils.extendAll({__patched:"Element"},NodeMixin$$module$$src$ShadyDOM$element_mixin,FragmentMixin$$module$$src$ShadyDOM$element_mixin,
ElementMixin$$module$$src$ShadyDOM$element_mixin,ActiveElementMixin$$module$$src$ShadyDOM$element_mixin),Document:module$$src$ShadyDOM$utils.extendAll({__patched:"Document"},NodeMixin$$module$$src$ShadyDOM$element_mixin,FragmentMixin$$module$$src$ShadyDOM$element_mixin,ElementMixin$$module$$src$ShadyDOM$element_mixin,UnderActiveElementMixin$$module$$src$ShadyDOM$element_mixin)},getRootNode$$module$$src$ShadyDOM$element_mixin=mixinImpl$$module$$src$ShadyDOM$element_mixin.getRootNode;
module$$src$ShadyDOM$element_mixin.Mixins=Mixins$$module$$src$ShadyDOM$element_mixin;module$$src$ShadyDOM$element_mixin.getRootNode=getRootNode$$module$$src$ShadyDOM$element_mixin;var module$$src$ShadyDOM$shady={},ShadyRoot$$module$$src$ShadyDOM$shady=function(a){if(!a)throw"Must provide a host";var b=document.createDocumentFragment();b.__proto__=ShadyFragmentMixin$$module$$src$ShadyDOM$shady;b._init(a);return b},ShadyMixin$$module$$src$ShadyDOM$shady={_init:function(a){this.__localName="ShadyRoot";a.shadyRoot=this;this.host=a;module$$src$ShadyDOM$tree.tree.Logical.saveChildNodes(a);module$$src$ShadyDOM$tree.tree.Logical.saveChildNodes(this);this._clean=!0;this._hasRendered=
!1;this._distributor=new module$$src$ShadyDOM$distributor.default(this);this.update()},update:function(){var a=this._findDistributionRoot(this.host);a._clean&&(a._clean=!1,enqueue$$module$$src$ShadyDOM$shady(function(){a.render()}))},_findDistributionRoot:function(a){for(var b=a.shadyRoot;a&&this._elementNeedsDistribution(a);)a=(b=a.getRootNode())&&b.host;return b},_elementNeedsDistribution:function(a){for(var b=module$$src$ShadyDOM$tree.tree.Logical.getChildNodes(a),c=0,d;c<b.length;c++)if(d=b[c],
this._distributor.isInsertionPoint(d))return a.getRootNode()},render:function(){this._clean||(this._skipUpdateInsertionPoints?this._hasRendered||(this._insertionPoints=[]):this.updateInsertionPoints(),this._skipUpdateInsertionPoints=!1,this.distribute(),this.compose(),this._distributor.rendered(),this._hasRendered=this._clean=!0)},forceRender:function(){this._clean=!1;this.render()},distribute:function(){for(var a=this._distributor.distribute(),b=0;b<a.length;b++)a[b].forceRender()},updateInsertionPoints:function(){for(var a=
this._insertionPoints=this._distributor.getInsertionPoints(),b=0,c;b<a.length;b++)c=a[b],module$$src$ShadyDOM$tree.tree.Logical.saveChildNodes(c),module$$src$ShadyDOM$tree.tree.Logical.saveChildNodes(module$$src$ShadyDOM$tree.tree.Logical.getParentNode(c))},get _insertionPoints(){this.__insertionPoints||this.updateInsertionPoints();return this.__insertionPoints||(this.__insertionPoints=[])},set _insertionPoints(a){this.__insertionPoints=a},hasInsertionPoint:function(){return this._distributor.hasInsertionPoint()},
compose:function(){this._composeTree()},_composeTree:function(){this._updateChildNodes(this.host,this._composeNode(this.host));for(var a=this._insertionPoints||[],b=0,c=a.length,d,e;b<c&&(d=a[b]);b++)e=module$$src$ShadyDOM$tree.tree.Logical.getParentNode(d),e!==this.host&&e!==this&&this._updateChildNodes(e,this._composeNode(e))},_composeNode:function(a){var b=[];a=module$$src$ShadyDOM$tree.tree.Logical.getChildNodes(a.shadyRoot||a);for(var c=0;c<a.length;c++){var d=a[c];if(this._distributor.isInsertionPoint(d))for(var e=
d._distributedNodes||(d._distributedNodes=[]),f=0;f<e.length;f++){var g=e[f];this.isFinalDestination(d,g)&&b.push(g)}else b.push(d)}return b},isFinalDestination:function(a,b){return this._distributor.isFinalDestination(a,b)},_updateChildNodes:function(a,b){for(var c=module$$src$ShadyDOM$tree.tree.Composed.getChildNodes(a),d=module$$src$ShadyDOM$array_splice.calculateSplices(b,c),e=0,f=0,g;e<d.length&&(g=d[e]);e++){for(var h=0,k;h<g.removed.length&&(k=g.removed[h]);h++)module$$src$ShadyDOM$tree.tree.Composed.getParentNode(k)===
a&&module$$src$ShadyDOM$tree.tree.Composed.removeChild(a,k),c.splice(g.index+f,1);f-=g.addedCount}for(e=0;e<d.length&&(g=d[e]);e++)for(f=c[g.index],h=g.index;h<g.index+g.addedCount;h++)k=b[h],module$$src$ShadyDOM$tree.tree.Composed.insertBefore(a,k,f),c.splice(h,0,k)},getInsertionPointTag:function(){return this._distributor.insertionPointTag}},ShadyFragmentMixin$$module$$src$ShadyDOM$shady=Object.create(DocumentFragment.prototype);
module$$src$ShadyDOM$utils.extend(ShadyFragmentMixin$$module$$src$ShadyDOM$shady,ShadyMixin$$module$$src$ShadyDOM$shady);var customElements$$module$$src$ShadyDOM$shady=window.CustomElements,flushList$$module$$src$ShadyDOM$shady=[],scheduled$$module$$src$ShadyDOM$shady;
function enqueue$$module$$src$ShadyDOM$shady(a){scheduled$$module$$src$ShadyDOM$shady||(scheduled$$module$$src$ShadyDOM$shady=!0,Promise.resolve().then(flush$$module$$src$ShadyDOM$shady));flushList$$module$$src$ShadyDOM$shady.push(a)}
function flush$$module$$src$ShadyDOM$shady(){for(;flushList$$module$$src$ShadyDOM$shady.length;)flushList$$module$$src$ShadyDOM$shady.shift()();customElements$$module$$src$ShadyDOM$shady&&customElements$$module$$src$ShadyDOM$shady.takeRecords();flushList$$module$$src$ShadyDOM$shady.length&&flush$$module$$src$ShadyDOM$shady()}module$$src$ShadyDOM$shady.ShadyRoot=ShadyRoot$$module$$src$ShadyDOM$shady;module$$src$ShadyDOM$shady.enqueue=enqueue$$module$$src$ShadyDOM$shady;
module$$src$ShadyDOM$shady.flush=flush$$module$$src$ShadyDOM$shady;var module$$src$ShadyDOM$patch={},patchedCount$$module$$src$ShadyDOM$patch=0,log$$module$$src$ShadyDOM$patch=!1,patchImpl$$module$$src$ShadyDOM$patch={canPatchNode:function(a){switch(a){case document.head:case document.documentElement:return!1;default:return!0}},hasPrototypeDescriptors:!!Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),patch:function(a){patchedCount$$module$$src$ShadyDOM$patch++;log$$module$$src$ShadyDOM$patch&&window.console.warn("patch node",a);this.hasPrototypeDescriptors?
module$$src$ShadyDOM$utils.patchPrototype(a,this.mixinForObject(a)):(window.console.warn("Patching instance rather than prototype",a),module$$src$ShadyDOM$utils.extend(a,this.mixinForNode(a)))},mixinForObject:function(a){switch(a.nodeType){case Node.ELEMENT_NODE:return module$$src$ShadyDOM$element_mixin.Mixins.Element;case Node.DOCUMENT_FRAGMENT_NODE:return module$$src$ShadyDOM$element_mixin.Mixins.Fragment;case Node.DOCUMENT_NODE:return module$$src$ShadyDOM$element_mixin.Mixins.Document;case Node.TEXT_NODE:case Node.COMMENT_NODE:return module$$src$ShadyDOM$element_mixin.Mixins.Node}},
unpatch:function(a){a.__sourceProto&&(a.__proto__=a.__sourceProto)}};function patchNode$$module$$src$ShadyDOM$patch(a){module$$src$ShadyDOM$utils.settings.inUse&&!isNodePatched$$module$$src$ShadyDOM$patch(a)&&patchImpl$$module$$src$ShadyDOM$patch.canPatchNode(a)&&(module$$src$ShadyDOM$tree.tree.saveChildNodes(a),patchImpl$$module$$src$ShadyDOM$patch.patch(a))}function unpatchNode$$module$$src$ShadyDOM$patch(a){patchImpl$$module$$src$ShadyDOM$patch.unpatch(a)}
function isNodePatched$$module$$src$ShadyDOM$patch(a){return!!a.__patched}module$$src$ShadyDOM$utils.common.patchNode=patchNode$$module$$src$ShadyDOM$patch;module$$src$ShadyDOM$patch.patchedCount=patchedCount$$module$$src$ShadyDOM$patch;module$$src$ShadyDOM$patch.patchNode=patchNode$$module$$src$ShadyDOM$patch;module$$src$ShadyDOM$patch.unpatchNode=unpatchNode$$module$$src$ShadyDOM$patch;module$$src$ShadyDOM$patch.isNodePatched=isNodePatched$$module$$src$ShadyDOM$patch;var module$$src$ShadyDOM$event_mixin={},origAddEventListener$$module$$src$ShadyDOM$event_mixin=Element.prototype.addEventListener,origRemoveEventListener$$module$$src$ShadyDOM$event_mixin=Element.prototype.removeEventListener,alwaysComposed$$module$$src$ShadyDOM$event_mixin={blur:!0,focus:!0,focusin:!0,focusout:!0,click:!0,dblclick:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,wheel:!0,beforeinput:!0,input:!0,keydown:!0,keyup:!0,compositionstart:!0,compositionupdate:!0,
compositionend:!0,touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0,pointerover:!0,pointerenter:!0,pointerdown:!0,pointermove:!0,pointerup:!0,pointercancel:!0,pointerout:!0,pointerleave:!0,gotpointercapture:!0,lostpointercapture:!0,dragstart:!0,drag:!0,dragenter:!0,dragleave:!0,dragover:!0,drop:!0,dragend:!0,DOMActivate:!0,DOMFocusIn:!0,DOMFocusOut:!0,keypress:!0};
function pathComposer$$module$$src$ShadyDOM$event_mixin(a,b){var c=[],d=a;for(a=a===window?window:a.getRootNode();d;)c.push(d),d=d.assignedSlot?d.assignedSlot:d.host&&(b||d!==a)?d.host:d.parentNode;c[c.length-1]===document&&c.push(window);return c}
function retarget$$module$$src$ShadyDOM$event_mixin(a,b){if(!module$$src$ShadyDOM$utils.isShadyRoot)return a;a=pathComposer$$module$$src$ShadyDOM$event_mixin(a,!0);for(var c=0,d,e,f,g;c<b.length;c++)if(d=b[c],f=d===window?window:d.getRootNode(),f!==e&&(g=a.indexOf(f),e=f),!module$$src$ShadyDOM$utils.isShadyRoot(f)||-1<g)return d}
var EventMixin$$module$$src$ShadyDOM$event_mixin={__patched:"Event",get composed(){this.isTrusted&&void 0===this.__composed&&(this.__composed=alwaysComposed$$module$$src$ShadyDOM$event_mixin[this.type]);return this.__composed||!1},composedPath:function(){this.__composedPath||(this.__composedPath=pathComposer$$module$$src$ShadyDOM$event_mixin(this.__target,this.composed));return this.__composedPath},get target(){return retarget$$module$$src$ShadyDOM$event_mixin(this.currentTarget,this.composedPath())},
get relatedTarget(){if(!this.__relatedTarget)return null;this.__relatedTargetComposedPath||(this.__relatedTargetComposedPath=pathComposer$$module$$src$ShadyDOM$event_mixin(this.__relatedTarget,!0));return retarget$$module$$src$ShadyDOM$event_mixin(this.currentTarget,this.__relatedTargetComposedPath)},stopPropagation:function(){Event.prototype.stopPropagation.call(this);this.__propagationStopped=!0},stopImmediatePropagation:function(){Event.prototype.stopImmediatePropagation.call(this);this.__propagationStopped=
this.__immediatePropagationStopped=!0}};function mixinComposedFlag$$module$$src$ShadyDOM$event_mixin(a){var b=function(b,d){b=new a(b,d);b.__composed=d&&!!d.composed;return b};module$$src$ShadyDOM$utils.extend(b,a);return b}var nonBubblingEventsToRetarget$$module$$src$ShadyDOM$event_mixin={focus:!0,blur:!0};
function fireHandlers$$module$$src$ShadyDOM$event_mixin(a,b,c){if(c=b.__handlers&&b.__handlers[a.type]&&b.__handlers[a.type][c])for(var d=0,e;(e=c[d])&&(e.call(b,a),!a.__immediatePropagationStopped);d++);}
function retargetNonBubblingEvent$$module$$src$ShadyDOM$event_mixin(a){var b=a.composedPath(),c;Object.defineProperty(event,"currentTarget",{get:function(){return c},configurable:!0});for(var d=b.length-1;0<=d;d--)if(c=b[d],fireHandlers$$module$$src$ShadyDOM$event_mixin(a,c,"capture"),a.__propagationStopped)return;Object.defineProperty(a,"eventPhase",{value:Event.BUBBLING_PHASE});for(d=0;d<b.length&&(c=b[d],fireHandlers$$module$$src$ShadyDOM$event_mixin(a,c,"bubble"),!a.__propagationStopped);d++);
}function shouldCapture$$module$$src$ShadyDOM$event_mixin(a){return!("object"===typeof a?!a.capture:!a)}
function addEventListener$$module$$src$ShadyDOM$event_mixin(a,b,c){if(b){this.__eventListenerCount||(this.__eventListenerCount=0);this.__eventListenerCount++;var d=function(a){a.__target||(a.__target=a.target,a.__relatedTarget=a.relatedTarget,module$$src$ShadyDOM$utils.patchPrototype(a,EventMixin$$module$$src$ShadyDOM$event_mixin));if(a.composed||-1<a.composedPath().indexOf(this))if(a.eventPhase===Event.BUBBLING_PHASE&&a.target===a.relatedTarget)a.stopImmediatePropagation();else return b(a)};b.__eventWrapper=
d;nonBubblingEventsToRetarget$$module$$src$ShadyDOM$event_mixin[a]?(this.__handlers=this.__handlers||{},this.__handlers[a]=this.__handlers[a]||{capture:[],bubble:[]},shouldCapture$$module$$src$ShadyDOM$event_mixin(c)?this.__handlers[a].capture.push(d):this.__handlers[a].bubble.push(d)):origAddEventListener$$module$$src$ShadyDOM$event_mixin.call(this,a,d,c)}}
function removeEventListener$$module$$src$ShadyDOM$event_mixin(a,b,c){if(b){var d=b.__eventWrapper;origRemoveEventListener$$module$$src$ShadyDOM$event_mixin.call(this,a,d||b,c);d&&(b.__eventWrapper=null,this.__eventListenerCount--,nonBubblingEventsToRetarget$$module$$src$ShadyDOM$event_mixin[a]&&this.__handlers&&this.__handlers[a]&&(shouldCapture$$module$$src$ShadyDOM$event_mixin(c)?(b=this.__handlers[a].capture.indexOf(d),-1<b&&this.__handlers[a].capture.splice(b,1)):(b=this.__handlers[a].bubble.indexOf(d),
-1<b&&this.__handlers[a].bubble.splice(b,1))))}}for(var ev in nonBubblingEventsToRetarget$$module$$src$ShadyDOM$event_mixin)window.addEventListener(ev,function(a){a.__target||(a.__target=a.target,a.__relatedTarget=a.relatedTarget,module$$src$ShadyDOM$utils.patchPrototype(a,EventMixin$$module$$src$ShadyDOM$event_mixin),retargetNonBubblingEvent$$module$$src$ShadyDOM$event_mixin(a),a.stopImmediatePropagation())},!0);
var OriginalEvent$$module$$src$ShadyDOM$event_mixin=Event,PatchedEvent$$module$$src$ShadyDOM$event_mixin=mixinComposedFlag$$module$$src$ShadyDOM$event_mixin(Event),PatchedCustomEvent$$module$$src$ShadyDOM$event_mixin=mixinComposedFlag$$module$$src$ShadyDOM$event_mixin(CustomEvent),PatchedMouseEvent$$module$$src$ShadyDOM$event_mixin=mixinComposedFlag$$module$$src$ShadyDOM$event_mixin(MouseEvent);module$$src$ShadyDOM$event_mixin.addEventListener=addEventListener$$module$$src$ShadyDOM$event_mixin;
module$$src$ShadyDOM$event_mixin.removeEventListener=removeEventListener$$module$$src$ShadyDOM$event_mixin;module$$src$ShadyDOM$event_mixin.OriginalEvent=OriginalEvent$$module$$src$ShadyDOM$event_mixin;module$$src$ShadyDOM$event_mixin.PatchedEvent=PatchedEvent$$module$$src$ShadyDOM$event_mixin;module$$src$ShadyDOM$event_mixin.PatchedCustomEvent=PatchedCustomEvent$$module$$src$ShadyDOM$event_mixin;module$$src$ShadyDOM$event_mixin.PatchedMouseEvent=PatchedMouseEvent$$module$$src$ShadyDOM$event_mixin;window.ShadyDOM={patch:module$$src$ShadyDOM$patch.patchNode,isPatched:module$$src$ShadyDOM$patch.isNodePatched,unpatch:module$$src$ShadyDOM$patch.unpatchNode,isShadyRoot:module$$src$ShadyDOM$utils.isShadyRoot,enqueue:module$$src$ShadyDOM$shady.enqueue,flush:module$$src$ShadyDOM$shady.flush,inUse:module$$src$ShadyDOM$utils.settings.inUse};
if(module$$src$ShadyDOM$utils.settings.inUse){var createRootAndEnsurePatched=function(a){module$$src$ShadyDOM$patch.patchNode(a);a=new ShadyRoot$$module$$src$ShadyDOM$shady(a);module$$src$ShadyDOM$patch.patchNode(a);return a};Element.prototype.attachShadow=function(){return createRootAndEnsurePatched(this)};Node.prototype.addEventListener=module$$src$ShadyDOM$event_mixin.addEventListener;Node.prototype.removeEventListener=module$$src$ShadyDOM$event_mixin.removeEventListener;Event=module$$src$ShadyDOM$event_mixin.PatchedEvent;
CustomEvent=module$$src$ShadyDOM$event_mixin.PatchedCustomEvent;MouseEvent=module$$src$ShadyDOM$event_mixin.PatchedMouseEvent;Object.defineProperty(Node.prototype,"isConnected",{get:function(){return document.contains(this)},configurable:!0});Node.prototype.getRootNode=function(a){return module$$src$ShadyDOM$element_mixin.getRootNode(this,a)}};
}).call(this)

//# sourceMappingURL=ShadyDOM.min.js.map
